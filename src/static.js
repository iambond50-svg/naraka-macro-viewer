// è‡ªåŠ¨ç”Ÿæˆçš„é™æ€æ–‡ä»¶å†…å®¹ - è¯·å‹¿æ‰‹åŠ¨ç¼–è¾‘
export const INDEX_HTML = "<!DOCTYPE html>\r\n<html lang=\"zh-CN\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>æ°¸åŠ«æ— é—´å®é”®ä½æŸ¥çœ‹å™¨</title>\r\n    <link rel=\"stylesheet\" href=\"style.css\">\r\n</head>\r\n<body>\r\n    <div class=\"container\">\r\n        <header>\r\n            <h1>ğŸ® æ°¸åŠ«æ— é—´å®é”®ä½æŸ¥çœ‹å™¨</h1>\r\n            <p class=\"subtitle\">æŸ¥çœ‹å’Œæœç´¢å®é”®ä½é…ç½® | ä¸€é”®åŒæ­¥åˆ°ATK Hub</p>\r\n        </header>\r\n\r\n        <div class=\"controls\">\r\n            <div class=\"search-box\">\r\n                <input type=\"text\" id=\"searchInput\" placeholder=\"æœç´¢å®åç§°æˆ–æŒ‰é”®...\">\r\n                <button id=\"searchBtn\">ğŸ” æœç´¢</button>\r\n            </div>\r\n            <div class=\"filter-box\">\r\n                <label for=\"categoryFilter\">åˆ†ç±»ç­›é€‰ï¼š</label>\r\n                <select id=\"categoryFilter\">\r\n                    <option value=\"\">å…¨éƒ¨</option>\r\n                </select>\r\n            </div>\r\n            <div class=\"stats\">\r\n                <span id=\"totalCount\">æ€»è®¡: 0 ä¸ªå®</span>\r\n                <span id=\"filteredCount\"></span>\r\n            </div>\r\n        </div>\r\n\r\n        <div id=\"macroList\" class=\"macro-list\">\r\n            <div class=\"loading\">æ­£åœ¨åŠ è½½å®æ•°æ®...</div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- è¯¦ç»†ä¿¡æ¯æ¨¡æ€çª—å£ -->\r\n    <div id=\"macroModal\" class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h2 id=\"modalTitle\">å®è¯¦ç»†ä¿¡æ¯</h2>\r\n                <span class=\"modal-close\">&times;</span>\r\n            </div>\r\n            <div class=\"modal-body\" id=\"modalBody\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- ATKåŒæ­¥æç¤º -->\r\n    <div id=\"syncToast\" class=\"sync-toast\"></div>\r\n\r\n    <script src=\"app.js\"></script>\r\n</body>\r\n</html>\r\n";
export const APP_JS = "/**\r\n * æ°¸åŠ«æ— é—´å®æŸ¥çœ‹å™¨ - Cloudflare Workers + D1 ç‰ˆæœ¬\r\n * ä»APIåŠ è½½æ•°æ®ï¼ŒATKåŒæ­¥åœ¨å‰ç«¯å®ç°\r\n */\r\n\r\n// APIåŸºç¡€è·¯å¾„\r\nconst API_BASE = '/api';\r\n\r\n// å…¨å±€æ•°æ®\r\nlet allMacros = [];\r\nlet currentPage = 1;\r\nlet totalPages = 1;\r\nlet totalCount = 0;\r\nconst perPage = 50;\r\n\r\n// ===== æ•°æ®åŠ è½½ =====\r\n\r\nasync function loadMacroData() {\r\n    try {\r\n        // åŠ è½½åˆ†ç±»åˆ—è¡¨\r\n        await loadCategories();\r\n        // åŠ è½½å®åˆ—è¡¨\r\n        await loadMacros();\r\n    } catch (error) {\r\n        console.error('åŠ è½½å®æ•°æ®å¤±è´¥:', error);\r\n        document.getElementById('macroList').innerHTML = `\r\n            <div class=\"no-results\">âŒ åŠ è½½å¤±è´¥: ${error.message}</div>\r\n        `;\r\n    }\r\n}\r\n\r\n// åŠ è½½åˆ†ç±»åˆ—è¡¨\r\nasync function loadCategories() {\r\n    const response = await fetch(`${API_BASE}/categories`);\r\n    const result = await response.json();\r\n    if (result.success) {\r\n        const categoryFilter = document.getElementById('categoryFilter');\r\n        result.data.forEach(cat => {\r\n            const option = document.createElement('option');\r\n            option.value = cat.name;\r\n            option.textContent = `${cat.name} (${cat.count})`;\r\n            categoryFilter.appendChild(option);\r\n        });\r\n    }\r\n}\r\n\r\n// åŠ è½½å®åˆ—è¡¨\r\nasync function loadMacros(page = 1) {\r\n    const searchTerm = document.getElementById('searchInput').value;\r\n    const category = document.getElementById('categoryFilter').value;\r\n    \r\n    const params = new URLSearchParams({ page, per_page: perPage });\r\n    if (searchTerm) params.append('search', searchTerm);\r\n    if (category) params.append('category', category);\r\n    \r\n    const response = await fetch(`${API_BASE}/macros?${params}`);\r\n    const result = await response.json();\r\n    \r\n    if (result.success) {\r\n        allMacros = result.data;\r\n        currentPage = result.pagination.page;\r\n        totalPages = result.pagination.total_pages;\r\n        totalCount = result.pagination.total;\r\n        \r\n        displayMacros(allMacros);\r\n        updateStats();\r\n        updatePagination();\r\n    }\r\n}\r\n\r\n// æ˜¾ç¤ºå®åˆ—è¡¨\r\nfunction displayMacros(macros) {\r\n    const macroList = document.getElementById('macroList');\r\n    \r\n    if (!macros || macros.length === 0) {\r\n        macroList.innerHTML = '<div class=\"no-results\">ğŸ˜• æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å®</div>';\r\n        return;\r\n    }\r\n    \r\n    macroList.innerHTML = macros.map(macro => createMacroCard(macro)).join('');\r\n}\r\n\r\n// åˆ›å»ºå®å¡ç‰‡HTML\r\nfunction createMacroCard(macro) {\r\n    const name = macro.name || 'æœªå‘½åå®';\r\n    const category = macro.category || 'æœªåˆ†ç±»';\r\n    const macroType = macro.macroType || macro.macro?.type || 'UNKNOWN';\r\n    \r\n    let keysHTML = '';\r\n    if (macroType === 'KEYSTROKE') {\r\n        keysHTML = renderKeystroke(macro.macro);\r\n    } else if (macroType === 'SEQUENCE') {\r\n        keysHTML = renderSequence(macro.macro);\r\n    }\r\n    \r\n    // åªæœ‰SEQUENCEç±»å‹å¯ä»¥åŒæ­¥åˆ°ATK\r\n    const syncBtn = macroType === 'SEQUENCE' \r\n        ? `<button class=\"card-sync-btn\" onclick=\"event.stopPropagation(); syncSingleMacro('${macro.id}')\">\\ud83d\\udd04 åŒæ­¥åˆ°ATK</button>`\r\n        : '';\r\n    \r\n    return `\r\n        <div class=\"macro-card\" data-macro-id=\"${macro.id}\" onclick=\"showMacroDetail('${macro.id}')\">\r\n            <div class=\"macro-header\">\r\n                <div class=\"macro-name\">${escapeHtml(name)}</div>\r\n                ${category !== 'æœªåˆ†ç±»' ? `<div class=\"macro-category\">${escapeHtml(category)}</div>` : ''}\r\n            </div>\r\n            <div class=\"macro-type\">ç±»å‹: ${macroType}</div>\r\n            <div class=\"macro-keys\">${keysHTML}</div>\r\n            ${syncBtn}\r\n        </div>\r\n    `;\r\n}\r\n\r\n// ===== æ¸²æŸ“å‡½æ•° =====\r\n\r\nfunction renderKeystroke(macro) {\r\n    const actionName = macro.actionName || '';\r\n    if (actionName) {\r\n        return `<div class=\"key-display\">${escapeHtml(actionName)}</div>`;\r\n    }\r\n    \r\n    const code = macro.keystroke?.code;\r\n    const modifiers = macro.keystroke?.modifiers || [];\r\n    \r\n    let keys = [];\r\n    modifiers.forEach(mod => keys.push(getModifierName(mod)));\r\n    if (code) keys.push(getKeyName(code));\r\n    \r\n    return keys.map(key => `<div class=\"key-display\">${escapeHtml(key)}</div>`).join('');\r\n}\r\n\r\nfunction renderSequence(macro) {\r\n    const sequence = macro.sequence;\r\n    if (!sequence) return '<div class=\"sequence-info\">æ— åºåˆ—ä¿¡æ¯</div>';\r\n    \r\n    const defaultDelay = sequence.defaultDelay || 0;\r\n    let html = `<div class=\"sequence-info\">é»˜è®¤å»¶è¿Ÿ: ${defaultDelay}ms</div>`;\r\n    \r\n    const sequenceTypes = [\r\n        { key: 'simpleSequence', label: '' },\r\n        { key: 'heldSequence', label: '(æŒ‰ä½)' },\r\n        { key: 'toggleSequence', label: '(åˆ‡æ¢)' },\r\n        { key: 'pressSequence', label: '(æŒ‰ä¸‹)' },\r\n        { key: 'releaseSequence', label: '(é‡Šæ”¾)' }\r\n    ];\r\n    \r\n    for (const seqType of sequenceTypes) {\r\n        if (sequence[seqType.key]?.components?.length > 0) {\r\n            const components = sequence[seqType.key].components;\r\n            if (seqType.label) {\r\n                html += `<div class=\"sequence-info\">${seqType.label}</div>`;\r\n            }\r\n            html += '<div class=\"sequence-steps\">' + renderComponents(components) + '</div>';\r\n            break;\r\n        }\r\n    }\r\n    \r\n    return html;\r\n}\r\n\r\nfunction renderComponents(components) {\r\n    let html = '';\r\n    components.forEach(component => {\r\n        if (component.keyboard) {\r\n            const displayName = component.keyboard.displayName;\r\n            const isDown = component.keyboard.isDown;\r\n            const className = isDown ? 'key-down' : 'key-up';\r\n            const symbol = isDown ? 'â†“' : 'â†‘';\r\n            html += `<div class=\"sequence-step ${className}\">${symbol} ${escapeHtml(displayName)}</div>`;\r\n        } else if (component.delay) {\r\n            html += `<div class=\"sequence-step delay\">â± ${component.delay.durationMs}ms</div>`;\r\n        } else if (component.mouse) {\r\n            html += renderMouseAction(component.mouse);\r\n        } else if (component.mouseMacro) {\r\n            html += `<div class=\"sequence-step mouse-action\">ğŸ–± ${component.mouseMacro.action}</div>`;\r\n        }\r\n    });\r\n    return html;\r\n}\r\n\r\nfunction renderMouseAction(mouse) {\r\n    if (mouse.button) {\r\n        const buttonName = getMouseButtonName(mouse.button.hidUsage);\r\n        const isDown = mouse.button.isDown;\r\n        const symbol = isDown ? 'â†“' : 'â†‘';\r\n        const className = isDown ? 'mouse-down' : 'mouse-up';\r\n        return `<div class=\"sequence-step ${className}\">ğŸ–± ${symbol} ${buttonName}</div>`;\r\n    } else if (mouse.wheel) {\r\n        return `<div class=\"sequence-step mouse-wheel\">ğŸ–± ${getMouseWheelAction(mouse.wheel.hidUsage)}</div>`;\r\n    } else if (mouse.move) {\r\n        return `<div class=\"sequence-step mouse-move\">ğŸ–± ç§»åŠ¨ (${mouse.move.x || 0}, ${mouse.move.y || 0})</div>`;\r\n    }\r\n    return '';\r\n}\r\n\r\n// ===== é”®ç æ˜ å°„ =====\r\n\r\nfunction getModifierName(code) {\r\n    const modifiers = {\r\n        224: 'Ctrl', 225: 'Shift', 226: 'Alt', 227: 'Win',\r\n        228: 'Right Ctrl', 229: 'Right Shift', 230: 'Right Alt', 231: 'Right Win'\r\n    };\r\n    return modifiers[code] || `Mod${code}`;\r\n}\r\n\r\nfunction getKeyName(code) {\r\n    const keys = {\r\n        4: 'A', 5: 'B', 6: 'C', 7: 'D', 8: 'E', 9: 'F', 10: 'G', 11: 'H',\r\n        12: 'I', 13: 'J', 14: 'K', 15: 'L', 16: 'M', 17: 'N', 18: 'O', 19: 'P',\r\n        20: 'Q', 21: 'R', 22: 'S', 23: 'T', 24: 'U', 25: 'V', 26: 'W', 27: 'X',\r\n        28: 'Y', 29: 'Z',\r\n        30: '1', 31: '2', 32: '3', 33: '4', 34: '5', 35: '6', 36: '7', 37: '8',\r\n        38: '9', 39: '0',\r\n        40: 'Enter', 41: 'Esc', 42: 'Backspace', 43: 'Tab', 44: 'Space',\r\n        45: '-', 46: '=', 47: '[', 48: ']', 49: '\\\\', 51: ';', 52: '\\'',\r\n        53: '`', 54: ',', 55: '.', 56: '/',\r\n        58: 'F1', 59: 'F2', 60: 'F3', 61: 'F4', 62: 'F5', 63: 'F6',\r\n        64: 'F7', 65: 'F8', 66: 'F9', 67: 'F10', 68: 'F11', 69: 'F12'\r\n    };\r\n    return keys[code] || `Key${code}`;\r\n}\r\n\r\nfunction getMouseButtonName(hidUsage) {\r\n    const buttons = { '1': 'å·¦é”®', '2': 'å³é”®', '3': 'ä¸­é”®', '4': 'ä¾§é”®1', '5': 'ä¾§é”®2' };\r\n    return buttons[hidUsage] || `æŒ‰é”®${hidUsage}`;\r\n}\r\n\r\nfunction getMouseWheelAction(hidUsage) {\r\n    const wheels = { '1': 'æ»šè½®å‘ä¸Š', '2': 'æ»šè½®å‘ä¸‹', '6': 'æ»šè½®å‘ä¸Š', '7': 'æ»šè½®å‘ä¸‹' };\r\n    return wheels[hidUsage] || `æ»šè½®${hidUsage}`;\r\n}\r\n\r\n// ===== å·¥å…·å‡½æ•° =====\r\n\r\nfunction escapeHtml(text) {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n}\r\n\r\nfunction searchMacros() {\r\n    currentPage = 1;\r\n    loadMacros(1);\r\n}\r\n\r\nfunction updateStats() {\r\n    document.getElementById('totalCount').textContent = `æ€»è®¡: ${totalCount} ä¸ªå®`;\r\n    document.getElementById('filteredCount').textContent = `æ˜¾ç¤º: ${allMacros.length} | ç¬¬ ${currentPage}/${totalPages} é¡µ`;\r\n    document.getElementById('filteredCount').style.display = 'inline-block';\r\n}\r\n\r\nfunction updatePagination() {\r\n    const existingPagination = document.querySelector('.pagination');\r\n    if (existingPagination) existingPagination.remove();\r\n    \r\n    if (totalPages <= 1) return;\r\n    \r\n    let html = '<div class=\"pagination\">';\r\n    \r\n    if (currentPage > 1) {\r\n        html += `<button class=\"page-btn\" onclick=\"goToPage(${currentPage - 1})\">Â« ä¸Šä¸€é¡µ</button>`;\r\n    }\r\n    \r\n    const startPage = Math.max(1, currentPage - 2);\r\n    const endPage = Math.min(totalPages, currentPage + 2);\r\n    \r\n    if (startPage > 1) {\r\n        html += `<button class=\"page-btn\" onclick=\"goToPage(1)\">1</button>`;\r\n        if (startPage > 2) html += '<span class=\"page-dots\">...</span>';\r\n    }\r\n    \r\n    for (let i = startPage; i <= endPage; i++) {\r\n        const activeClass = i === currentPage ? 'active' : '';\r\n        html += `<button class=\"page-btn ${activeClass}\" onclick=\"goToPage(${i})\">${i}</button>`;\r\n    }\r\n    \r\n    if (endPage < totalPages) {\r\n        if (endPage < totalPages - 1) html += '<span class=\"page-dots\">...</span>';\r\n        html += `<button class=\"page-btn\" onclick=\"goToPage(${totalPages})\">${totalPages}</button>`;\r\n    }\r\n    \r\n    if (currentPage < totalPages) {\r\n        html += `<button class=\"page-btn\" onclick=\"goToPage(${currentPage + 1})\">ä¸‹ä¸€é¡µ Â»</button>`;\r\n    }\r\n    \r\n    html += '</div>';\r\n    document.querySelector('.container').insertAdjacentHTML('beforeend', html);\r\n}\r\n\r\nfunction goToPage(page) {\r\n    if (page >= 1 && page <= totalPages) {\r\n        loadMacros(page);\r\n        window.scrollTo({ top: 0, behavior: 'smooth' });\r\n    }\r\n}\r\n\r\n// ===== å®è¯¦æƒ…æ¨¡æ€çª—å£ =====\r\n\r\nfunction showMacroDetail(macroId) {\r\n    const macro = allMacros.find(m => m.id === macroId);\r\n    if (!macro) return;\r\n    \r\n    displayMacroModal(macro);\r\n}\r\n\r\nfunction displayMacroModal(macro) {\r\n    const modal = document.getElementById('macroModal');\r\n    const modalTitle = document.getElementById('modalTitle');\r\n    const modalBody = document.getElementById('modalBody');\r\n    \r\n    modalTitle.textContent = macro.name || 'æœªå‘½åå®';\r\n    \r\n    let html = '<div class=\"modal-info-grid\">';\r\n    html += `\r\n        <div class=\"modal-info-item\">\r\n            <div class=\"modal-info-label\">å®åç§°</div>\r\n            <div class=\"modal-info-value\">${escapeHtml(macro.name || 'æœªå‘½å')}</div>\r\n        </div>\r\n        <div class=\"modal-info-item\">\r\n            <div class=\"modal-info-label\">åˆ†ç±»</div>\r\n            <div class=\"modal-info-value\">${escapeHtml(macro.category || 'æœªåˆ†ç±»')}</div>\r\n        </div>\r\n        <div class=\"modal-info-item\">\r\n            <div class=\"modal-info-label\">ç±»å‹</div>\r\n            <div class=\"modal-info-value\">${escapeHtml(macro.macroType)}</div>\r\n        </div>\r\n    `;\r\n    html += '</div>';\r\n    \r\n    html += '<div class=\"modal-section\">';\r\n    html += '<div class=\"modal-section-title\">âš™ï¸ å®é…ç½®è¯¦æƒ…</div>';\r\n    \r\n    if (macro.macroType === 'KEYSTROKE') {\r\n        html += renderKeystrokeDetail(macro.macro);\r\n    } else if (macro.macroType === 'SEQUENCE') {\r\n        html += renderSequenceDetail(macro.macro);\r\n    }\r\n    \r\n    html += '</div>';\r\n    \r\n    modalBody.innerHTML = html;\r\n    modal.classList.add('show');\r\n}\r\n\r\nfunction renderKeystrokeDetail(macro) {\r\n    let html = '<div class=\"modal-keystroke\">';\r\n    if (macro.actionName) {\r\n        html += `<div class=\"modal-key\">${escapeHtml(macro.actionName)}</div>`;\r\n    }\r\n    if (macro.keystroke) {\r\n        (macro.keystroke.modifiers || []).forEach(mod => {\r\n            html += `<div class=\"modal-key\">${escapeHtml(getModifierName(mod))}</div>`;\r\n        });\r\n        if (macro.keystroke.code) {\r\n            html += `<div class=\"modal-key\">${escapeHtml(getKeyName(macro.keystroke.code))}</div>`;\r\n        }\r\n    }\r\n    html += '</div>';\r\n    return html;\r\n}\r\n\r\nfunction renderSequenceDetail(macro) {\r\n    const sequence = macro.sequence;\r\n    if (!sequence) return '<div class=\"modal-info-value\">æ— åºåˆ—ä¿¡æ¯</div>';\r\n    \r\n    let html = '<div class=\"modal-sequence-container\">';\r\n    html += `<div class=\"modal-info-label\">é»˜è®¤å»¶è¿Ÿ: ${sequence.defaultDelay || 0}ms</div>`;\r\n    \r\n    const sequenceTypes = [\r\n        { key: 'simpleSequence', label: 'ç®€å•åºåˆ—' },\r\n        { key: 'heldSequence', label: 'æŒ‰ä½åºåˆ—' },\r\n        { key: 'toggleSequence', label: 'åˆ‡æ¢åºåˆ—' }\r\n    ];\r\n    \r\n    for (const seqType of sequenceTypes) {\r\n        if (sequence[seqType.key]?.components?.length > 0) {\r\n            const components = sequence[seqType.key].components;\r\n            html += `<div class=\"modal-info-label\" style=\"margin-top: 15px;\">${seqType.label} (å…± ${components.length} æ­¥):</div>`;\r\n            html += '<div class=\"modal-sequence-steps\">' + renderComponentsDetail(components) + '</div>';\r\n        }\r\n    }\r\n    \r\n    html += '</div>';\r\n    return html;\r\n}\r\n\r\nfunction renderComponentsDetail(components) {\r\n    let html = '';\r\n    components.forEach(component => {\r\n        if (component.keyboard) {\r\n            const isDown = component.keyboard.isDown;\r\n            const className = isDown ? 'key-down' : 'key-up';\r\n            const symbol = isDown ? 'â†“' : 'â†‘';\r\n            html += `<div class=\"modal-sequence-step ${className}\">${symbol} ${escapeHtml(component.keyboard.displayName)}</div>`;\r\n        } else if (component.delay) {\r\n            html += `<div class=\"modal-sequence-step delay\">â± ${component.delay.durationMs}ms</div>`;\r\n        } else if (component.mouse) {\r\n            if (component.mouse.button) {\r\n                const isDown = component.mouse.button.isDown;\r\n                const className = isDown ? 'mouse-down' : 'mouse-up';\r\n                const symbol = isDown ? 'â†“' : 'â†‘';\r\n                html += `<div class=\"modal-sequence-step ${className}\">ğŸ–± ${symbol} ${getMouseButtonName(component.mouse.button.hidUsage)}</div>`;\r\n            }\r\n        }\r\n    });\r\n    return html;\r\n}\r\n\r\nfunction closeModal() {\r\n    document.getElementById('macroModal').classList.remove('show');\r\n}\r\n\r\n// ===== ATK Hub åŒæ­¥åŠŸèƒ½ =====\r\n\r\n// G Hub åˆ° ATK é”®ç æ˜ å°„\r\nconst GHUB_TO_ATK_KEYCODE = {\r\n    4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13,\r\n    14: 14, 15: 15, 16: 16, 17: 17, 18: 18, 19: 19, 20: 20, 21: 21, 22: 22,\r\n    23: 23, 24: 24, 25: 25, 26: 26, 27: 27, 28: 28, 29: 29,\r\n    30: 30, 31: 31, 32: 32, 33: 33, 34: 34, 35: 35, 36: 36, 37: 37, 38: 38, 39: 39,\r\n    40: 40, 41: 41, 42: 42, 43: 43, 44: 44, 45: 45, 46: 46, 47: 47, 48: 48,\r\n    49: 49, 51: 51, 52: 52, 53: 53, 54: 54, 55: 55, 56: 56,\r\n    58: 58, 59: 59, 60: 60, 61: 61, 62: 62, 63: 63, 64: 64, 65: 65,\r\n    66: 66, 67: 67, 68: 68, 69: 69\r\n};\r\n\r\n// è½¬æ¢å®ä¸ºATKæ ¼å¼\r\nfunction convertMacroToATK(macro) {\r\n    if (macro.macroType !== 'SEQUENCE') return null;\r\n    \r\n    const sequence = macro.macro?.sequence;\r\n    if (!sequence) return null;\r\n    \r\n    const seqTypes = ['simpleSequence', 'heldSequence', 'toggleSequence', 'pressSequence', 'releaseSequence'];\r\n    let components = null;\r\n    \r\n    for (const type of seqTypes) {\r\n        if (sequence[type]?.components?.length > 0) {\r\n            components = sequence[type].components;\r\n            break;\r\n        }\r\n    }\r\n    \r\n    if (!components) return null;\r\n    \r\n    const actions = [];\r\n    let lastDelay = sequence.defaultDelay || 50;\r\n    \r\n    for (const comp of components) {\r\n        if (comp.delay) {\r\n            lastDelay = comp.delay.durationMs || 50;\r\n        } else if (comp.keyboard) {\r\n            // G Hub ä½¿ç”¨ hidUsage å­—æ®µå­˜å‚¨é”®ç \r\n            const keyCode = parseInt(comp.keyboard.hidUsage) || comp.keyboard.hidCode || comp.keyboard.keyCode;\r\n            if (keyCode) {\r\n                actions.push({\r\n                    delay: lastDelay,\r\n                    keyStatus: comp.keyboard.isDown ? 0 : 1,\r\n                    type: 1,\r\n                    keyCode: GHUB_TO_ATK_KEYCODE[keyCode] || keyCode\r\n                });\r\n            }\r\n        } else if (comp.mouse?.button) {\r\n            actions.push({\r\n                delay: lastDelay,\r\n                keyStatus: comp.mouse.button.isDown ? 0 : 1,\r\n                type: 4,\r\n                keyCode: parseInt(comp.mouse.button.hidUsage) || 1\r\n            });\r\n        }\r\n    }\r\n    \r\n    if (actions.length === 0) return null;\r\n    \r\n    return {\r\n        name: macro.name,\r\n        type: 0,\r\n        frequency: 1,\r\n        actions: actions\r\n    };\r\n}\r\n\r\n// æ˜¾ç¤ºæç¤ºæ¶ˆæ¯\r\nfunction showToast(message, isSuccess = true) {\r\n    const toast = document.getElementById('syncToast');\r\n    toast.textContent = message;\r\n    toast.className = 'sync-toast show ' + (isSuccess ? 'success' : 'error');\r\n    setTimeout(() => toast.className = 'sync-toast', 3000);\r\n}\r\n\r\n// å•ä¸ªå®åŒæ­¥åˆ°ATK\r\nfunction syncSingleMacro(macroId) {\r\n    const macro = allMacros.find(m => m.id === macroId);\r\n    if (!macro) {\r\n        showToast('âŒ æ‰¾ä¸åˆ°å®æ•°æ®', false);\r\n        return;\r\n    }\r\n    \r\n    const atkMacro = convertMacroToATK(macro);\r\n    if (!atkMacro) {\r\n        showToast('âŒ è¯¥å®æ— æ³•è½¬æ¢', false);\r\n        return;\r\n    }\r\n    \r\n    // ç”ŸæˆåŒæ­¥ä»£ç \r\n    const script = generateSyncScript(atkMacro);\r\n    \r\n    navigator.clipboard.writeText(script).then(() => {\r\n        showToast(`âœ… ã€Œ${macro.name}ã€åŒæ­¥ä»£ç å·²å¤åˆ¶ï¼Œè¯·åˆ°ATK Hubæ§åˆ¶å°ç²˜è´´`);\r\n    }).catch(err => {\r\n        showToast('âŒ å¤åˆ¶å¤±è´¥: ' + err.message, false);\r\n    });\r\n}\r\n\r\n// ç”ŸæˆåŒæ­¥ä»£ç \r\nfunction generateSyncScript(atkMacro) {\r\n    const macroJson = JSON.stringify(atkMacro);\r\n    return `\r\n(async () => {\r\n  const log = (...args) => console.log('[naraka-sync]', ...args);\r\n  const newMacro = ${macroJson};\r\n\r\n  function upsert(list) {\r\n    const i = list.findIndex(m => m.name === newMacro.name);\r\n    if (i >= 0) list[i] = newMacro; else list.push(newMacro);\r\n  }\r\n\r\n  // 1) çœŸå®è®¾å¤‡ï¼šé€šè¿‡ Pinia å†™å…¥ InfoControllerStore.deviceData.deviceConfig.macroList\r\n  try {\r\n    const app = document.querySelector('#app')?.__vue_app__;\r\n    const pinia = app?.config?.globalProperties?.$pinia;\r\n    const infoStore = pinia?._s?.get('InfoControllerStore');\r\n    const state = infoStore?.$state;\r\n    const deviceData = state?.deviceData;\r\n    if (deviceData?.deviceConfig) {\r\n      deviceData.deviceConfig.macroList = deviceData.deviceConfig.macroList || [];\r\n      upsert(deviceData.deviceConfig.macroList);\r\n      if (typeof infoStore.setDeviceData === 'function') {\r\n        infoStore.setDeviceData(deviceData);\r\n      } else if (typeof infoStore.$patch === 'function') {\r\n        infoStore.$patch(s => { s.deviceData = deviceData; });\r\n      }\r\n      // å°è¯•è‡ªåŠ¨ç‚¹å‡»â€œä¿å­˜â€æŒ‰é’®ï¼ˆå¦‚å­˜åœ¨ï¼‰\r\n      try {\r\n        const btns = Array.from(document.querySelectorAll('button'));\r\n        const saveBtn = btns.find(b => /ä¿å­˜/.test(b.textContent || ''));\r\n        if (saveBtn) saveBtn.click();\r\n      } catch (_) {}\r\n      log('âœ… å·²å†™å…¥å®åˆ°çœŸå®è®¾å¤‡é…ç½®: ' + newMacro.name + 'ã€‚è‹¥æœªè‡ªåŠ¨ä¿å­˜ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»â€œä¿å­˜â€ã€‚');\r\n      return { success: true, mode: 'real', count: deviceData.deviceConfig.macroList.length };\r\n    }\r\n  } catch (e) {\r\n    log('real-device path failed', e);\r\n  }\r\n\r\n  // 2) æ¼”ç¤ºæ¨¡å¼å›é€€ï¼šå†™å…¥ sessionStorage ä¸­çš„æ¼”ç¤ºè®¾å¤‡æ•°æ®\r\n  try {\r\n    const keys = ['__demo_kb_summary_4471', '__demo_mouse_summary_4580-ATK F1 Ultimate 2.0', '__demo_mouse_summary_4252-ATK RS6'];\r\n    for (const key of keys) {\r\n      const raw = sessionStorage.getItem(key);\r\n      if (!raw) continue;\r\n      const parsed = JSON.parse(raw);\r\n      parsed.deviceConfig = parsed.deviceConfig || {};\r\n      parsed.deviceConfig.macroList = parsed.deviceConfig.macroList || [];\r\n      upsert(parsed.deviceConfig.macroList);\r\n      sessionStorage.setItem(key, JSON.stringify(parsed));\r\n      log('âœ… å·²å†™å…¥å®åˆ°æ¼”ç¤ºè®¾å¤‡é…ç½®: ' + newMacro.name);\r\n      return { success: true, mode: 'demo', count: parsed.deviceConfig.macroList.length };\r\n    }\r\n  } catch (e) {\r\n    log('demo path failed', e);\r\n  }\r\n\r\n  console.error('âŒ æœªæ‰¾åˆ° ATK Hub è¿è¡Œç¯å¢ƒæˆ–è®¾å¤‡æ•°æ®ã€‚è¯·ç¡®è®¤å·²æ‰“å¼€ hub.atk.pro å¹¶è¿æ¥è®¾å¤‡æˆ–è¿›å…¥æ¼”ç¤ºæ¨¡å¼ã€‚');\r\n  return { success: false };\r\n})();\r\n`;\r\n}\r\n\r\n// ===== äº‹ä»¶ç»‘å®š =====\r\n\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    // æœç´¢\r\n    document.getElementById('searchBtn').addEventListener('click', searchMacros);\r\n    document.getElementById('searchInput').addEventListener('keyup', e => {\r\n        if (e.key === 'Enter') searchMacros();\r\n    });\r\n    document.getElementById('categoryFilter').addEventListener('change', searchMacros);\r\n    \r\n    // è¯¦æƒ…æ¨¡æ€çª—å£\r\n    document.querySelector('#macroModal .modal-close').addEventListener('click', closeModal);\r\n    window.addEventListener('click', e => {\r\n        if (e.target === document.getElementById('macroModal')) closeModal();\r\n    });\r\n    document.addEventListener('keydown', e => {\r\n        if (e.key === 'Escape') closeModal();\r\n    });\r\n    \r\n    // åŠ è½½æ•°æ®\r\n    loadMacroData();\r\n});\r\n";
export const STYLE_CSS = "* {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    min-height: 100vh;\r\n    padding: 20px;\r\n}\r\n\r\n.container {\r\n    max-width: 1400px;\r\n    margin: 0 auto;\r\n    background: white;\r\n    border-radius: 20px;\r\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\r\n    overflow: hidden;\r\n}\r\n\r\nheader {\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    padding: 40px;\r\n    text-align: center;\r\n}\r\n\r\nheader h1 {\r\n    font-size: 2.5em;\r\n    margin-bottom: 10px;\r\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.subtitle {\r\n    font-size: 1.1em;\r\n    opacity: 0.9;\r\n}\r\n\r\n.controls {\r\n    padding: 30px;\r\n    background: #f8f9fa;\r\n    border-bottom: 2px solid #e9ecef;\r\n    display: flex;\r\n    gap: 20px;\r\n    flex-wrap: wrap;\r\n    align-items: center;\r\n}\r\n\r\n.search-box {\r\n    flex: 1;\r\n    min-width: 300px;\r\n    display: flex;\r\n    gap: 10px;\r\n}\r\n\r\n.search-box input {\r\n    flex: 1;\r\n    padding: 12px 20px;\r\n    border: 2px solid #dee2e6;\r\n    border-radius: 10px;\r\n    font-size: 16px;\r\n    transition: all 0.3s;\r\n}\r\n\r\n.search-box input:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.search-box button {\r\n    padding: 12px 30px;\r\n    background: #667eea;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 10px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n    font-weight: 600;\r\n}\r\n\r\n.search-box button:hover {\r\n    background: #5568d3;\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.filter-box {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.filter-box label {\r\n    font-weight: 600;\r\n    color: #495057;\r\n}\r\n\r\n.filter-box select {\r\n    padding: 12px 20px;\r\n    border: 2px solid #dee2e6;\r\n    border-radius: 10px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    background: white;\r\n    min-width: 150px;\r\n}\r\n\r\n.stats {\r\n    margin-left: auto;\r\n    display: flex;\r\n    gap: 15px;\r\n    font-weight: 600;\r\n    color: #495057;\r\n}\r\n\r\n.stats span {\r\n    padding: 10px 20px;\r\n    background: white;\r\n    border-radius: 10px;\r\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.macro-list {\r\n    padding: 30px;\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\r\n    gap: 20px;\r\n    max-height: calc(100vh - 400px);\r\n    overflow-y: auto;\r\n}\r\n\r\n.loading {\r\n    grid-column: 1 / -1;\r\n    text-align: center;\r\n    padding: 60px;\r\n    font-size: 1.2em;\r\n    color: #6c757d;\r\n}\r\n\r\n.macro-card {\r\n    background: white;\r\n    border: 2px solid #e9ecef;\r\n    border-radius: 15px;\r\n    padding: 20px;\r\n    transition: all 0.3s;\r\n    cursor: pointer;\r\n}\r\n\r\n.macro-card:hover {\r\n    transform: translateY(-5px);\r\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);\r\n    border-color: #667eea;\r\n}\r\n\r\n.macro-card.hidden {\r\n    display: none;\r\n}\r\n\r\n.macro-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: start;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.macro-name {\r\n    font-size: 1.2em;\r\n    font-weight: 700;\r\n    color: #212529;\r\n    flex: 1;\r\n    word-break: break-word;\r\n}\r\n\r\n.macro-category {\r\n    padding: 5px 12px;\r\n    background: #667eea;\r\n    color: white;\r\n    border-radius: 20px;\r\n    font-size: 0.85em;\r\n    font-weight: 600;\r\n    white-space: nowrap;\r\n}\r\n\r\n.macro-type {\r\n    display: inline-block;\r\n    padding: 8px 15px;\r\n    background: #f8f9fa;\r\n    border-radius: 8px;\r\n    font-size: 0.9em;\r\n    font-weight: 600;\r\n    color: #495057;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.macro-keys {\r\n    margin-top: 15px;\r\n    padding-top: 15px;\r\n    border-top: 2px solid #f8f9fa;\r\n}\r\n\r\n.card-sync-btn {\r\n    display: block;\r\n    width: 100%;\r\n    margin-top: 15px;\r\n    padding: 10px 15px;\r\n    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);\r\n    color: white;\r\n    border: none;\r\n    border-radius: 8px;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n}\r\n\r\n.card-sync-btn:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);\r\n}\r\n\r\n/* Toast æç¤º */\r\n.sync-toast {\r\n    position: fixed;\r\n    bottom: 30px;\r\n    left: 50%;\r\n    transform: translateX(-50%) translateY(100px);\r\n    padding: 15px 30px;\r\n    background: #333;\r\n    color: white;\r\n    border-radius: 10px;\r\n    font-size: 15px;\r\n    font-weight: 500;\r\n    opacity: 0;\r\n    transition: all 0.3s ease;\r\n    z-index: 10000;\r\n    max-width: 90%;\r\n    text-align: center;\r\n}\r\n\r\n.sync-toast.show {\r\n    transform: translateX(-50%) translateY(0);\r\n    opacity: 1;\r\n}\r\n\r\n.sync-toast.success {\r\n    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\r\n}\r\n\r\n.sync-toast.error {\r\n    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\r\n}\r\n\r\n.key-display {\r\n    display: inline-block;\r\n    padding: 8px 15px;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    border-radius: 8px;\r\n    font-weight: 700;\r\n    font-size: 1em;\r\n    margin: 5px 5px 5px 0;\r\n    box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.sequence-info {\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    background: #f8f9fa;\r\n    border-radius: 8px;\r\n    font-size: 0.9em;\r\n    color: #6c757d;\r\n}\r\n\r\n.sequence-steps {\r\n    margin-top: 10px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 5px;\r\n}\r\n\r\n.sequence-step {\r\n    padding: 5px 10px;\r\n    background: #e9ecef;\r\n    border-radius: 5px;\r\n    font-size: 0.85em;\r\n    font-weight: 600;\r\n}\r\n\r\n.sequence-step.key-down {\r\n    background: #d4edda;\r\n    color: #155724;\r\n}\r\n\r\n.sequence-step.key-up {\r\n    background: #f8d7da;\r\n    color: #721c24;\r\n}\r\n\r\n.sequence-step.delay {\r\n    background: #fff3cd;\r\n    color: #856404;\r\n}\r\n\r\n.sequence-step.mouse-down {\r\n    background: #cfe2ff;\r\n    color: #084298;\r\n}\r\n\r\n.sequence-step.mouse-up {\r\n    background: #e7f1ff;\r\n    color: #0a58ca;\r\n}\r\n\r\n.sequence-step.mouse-wheel {\r\n    background: #e0cffc;\r\n    color: #6f42c1;\r\n}\r\n\r\n.sequence-step.mouse-move {\r\n    background: #d1e7dd;\r\n    color: #0f5132;\r\n}\r\n\r\n.sequence-step.mouse-action {\r\n    background: #cfe2ff;\r\n    color: #084298;\r\n}\r\n\r\n.no-results {\r\n    grid-column: 1 / -1;\r\n    text-align: center;\r\n    padding: 60px;\r\n    font-size: 1.2em;\r\n    color: #6c757d;\r\n}\r\n\r\n/* æ»šåŠ¨æ¡æ ·å¼ */\r\n.macro-list::-webkit-scrollbar {\r\n    width: 10px;\r\n}\r\n\r\n.macro-list::-webkit-scrollbar-track {\r\n    background: #f1f1f1;\r\n    border-radius: 10px;\r\n}\r\n\r\n.macro-list::-webkit-scrollbar-thumb {\r\n    background: #667eea;\r\n    border-radius: 10px;\r\n}\r\n\r\n.macro-list::-webkit-scrollbar-thumb:hover {\r\n    background: #5568d3;\r\n}\r\n\r\n/* åˆ†é¡µæ ·å¼ */\r\n.pagination {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    gap: 10px;\r\n    padding: 30px;\r\n    background: #f8f9fa;\r\n    border-top: 2px solid #e9ecef;\r\n}\r\n\r\n.page-btn {\r\n    padding: 10px 18px;\r\n    background: white;\r\n    color: #495057;\r\n    border: 2px solid #dee2e6;\r\n    border-radius: 8px;\r\n    font-size: 15px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n    min-width: 45px;\r\n}\r\n\r\n.page-btn:hover {\r\n    background: #667eea;\r\n    color: white;\r\n    border-color: #667eea;\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.page-btn.active {\r\n    background: #667eea;\r\n    color: white;\r\n    border-color: #667eea;\r\n    box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.page-dots {\r\n    color: #6c757d;\r\n    font-weight: bold;\r\n    padding: 0 5px;\r\n}\r\n\r\n/* æ¨¡æ€çª—å£æ ·å¼ */\r\n.modal {\r\n    display: none;\r\n    position: fixed;\r\n    z-index: 1000;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: auto;\r\n    background-color: rgba(0, 0, 0, 0.6);\r\n    animation: fadeIn 0.3s;\r\n}\r\n\r\n.modal.show {\r\n    display: block;\r\n}\r\n\r\n@keyframes fadeIn {\r\n    from { opacity: 0; }\r\n    to { opacity: 1; }\r\n}\r\n\r\n.modal-content {\r\n    background-color: white;\r\n    margin: 3% auto;\r\n    padding: 0;\r\n    border-radius: 20px;\r\n    width: 90%;\r\n    max-width: 900px;\r\n    max-height: 85vh;\r\n    overflow: hidden;\r\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\r\n    animation: slideDown 0.3s;\r\n}\r\n\r\n@keyframes slideDown {\r\n    from {\r\n        transform: translateY(-50px);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateY(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n.modal-header {\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    padding: 25px 30px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.modal-header h2 {\r\n    margin: 0;\r\n    font-size: 1.8em;\r\n}\r\n\r\n.modal-close {\r\n    color: white;\r\n    font-size: 35px;\r\n    font-weight: bold;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n    line-height: 1;\r\n    padding: 0 10px;\r\n}\r\n\r\n.modal-close:hover {\r\n    transform: scale(1.2);\r\n    text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);\r\n}\r\n\r\n.modal-body {\r\n    padding: 30px;\r\n    max-height: calc(85vh - 100px);\r\n    overflow-y: auto;\r\n}\r\n\r\n.modal-info-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n    gap: 20px;\r\n    margin-bottom: 30px;\r\n}\r\n\r\n.modal-info-item {\r\n    background: #f8f9fa;\r\n    padding: 15px 20px;\r\n    border-radius: 10px;\r\n    border-left: 4px solid #667eea;\r\n}\r\n\r\n.modal-info-label {\r\n    font-weight: 700;\r\n    color: #495057;\r\n    font-size: 0.9em;\r\n    margin-bottom: 5px;\r\n    text-transform: uppercase;\r\n    letter-spacing: 0.5px;\r\n}\r\n\r\n.modal-info-value {\r\n    font-size: 1.1em;\r\n    color: #212529;\r\n    word-break: break-word;\r\n}\r\n\r\n.modal-section {\r\n    margin-top: 30px;\r\n    padding-top: 30px;\r\n    border-top: 2px solid #e9ecef;\r\n}\r\n\r\n.modal-section-title {\r\n    font-size: 1.4em;\r\n    font-weight: 700;\r\n    color: #212529;\r\n    margin-bottom: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.modal-sequence-container {\r\n    background: #f8f9fa;\r\n    padding: 20px;\r\n    border-radius: 10px;\r\n}\r\n\r\n.modal-sequence-steps {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 8px;\r\n    margin-top: 15px;\r\n}\r\n\r\n.modal-sequence-step {\r\n    padding: 10px 15px;\r\n    border-radius: 8px;\r\n    font-weight: 600;\r\n    font-size: 0.95em;\r\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* æ¨¡æ€çª—å£åºåˆ—æ­¥éª¤é¢œè‰² - ä¸ä¸»åˆ—è¡¨ä¸€è‡´ */\r\n.modal-sequence-step.key-down {\r\n    background: #d4edda;\r\n    color: #155724;\r\n}\r\n\r\n.modal-sequence-step.key-up {\r\n    background: #f8d7da;\r\n    color: #721c24;\r\n}\r\n\r\n.modal-sequence-step.delay {\r\n    background: #fff3cd;\r\n    color: #856404;\r\n}\r\n\r\n.modal-sequence-step.mouse-down {\r\n    background: #cfe2ff;\r\n    color: #084298;\r\n}\r\n\r\n.modal-sequence-step.mouse-up {\r\n    background: #e7f1ff;\r\n    color: #0a58ca;\r\n}\r\n\r\n.modal-sequence-step.mouse-wheel {\r\n    background: #e0cffc;\r\n    color: #6f42c1;\r\n}\r\n\r\n.modal-sequence-step.mouse-move {\r\n    background: #d1e7dd;\r\n    color: #0f5132;\r\n}\r\n\r\n.modal-sequence-step.mouse-action {\r\n    background: #cfe2ff;\r\n    color: #084298;\r\n}\r\n\r\n.modal-keystroke {\r\n    display: flex;\r\n    gap: 10px;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.modal-key {\r\n    padding: 15px 25px;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    border-radius: 10px;\r\n    font-weight: 700;\r\n    font-size: 1.2em;\r\n    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.modal-body::-webkit-scrollbar {\r\n    width: 10px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-track {\r\n    background: #f1f1f1;\r\n    border-radius: 10px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-thumb {\r\n    background: #667eea;\r\n    border-radius: 10px;\r\n}\r\n\r\n.modal-body::-webkit-scrollbar-thumb:hover {\r\n    background: #5568d3;\r\n}\r\n\r\n/* ATKå¯¼å‡ºæŒ‰é’® */\r\n.export-box {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.export-btn {\r\n    padding: 12px 25px;\r\n    background: linear-gradient(135deg, #00c853 0%, #00e676 100%);\r\n    color: white;\r\n    border: none;\r\n    border-radius: 10px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n    font-weight: 600;\r\n    box-shadow: 0 3px 10px rgba(0, 200, 83, 0.3);\r\n}\r\n\r\n.export-btn:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 5px 20px rgba(0, 200, 83, 0.4);\r\n}\r\n\r\n/* ATKå¯¼å‡ºæ¨¡æ€çª—å£ */\r\n.export-options {\r\n    margin-bottom: 25px;\r\n}\r\n\r\n.export-option {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.export-option label {\r\n    display: block;\r\n    font-weight: 600;\r\n    color: #495057;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.export-option input {\r\n    width: 100%;\r\n    padding: 12px 15px;\r\n    border: 2px solid #dee2e6;\r\n    border-radius: 8px;\r\n    font-size: 16px;\r\n    transition: all 0.3s;\r\n}\r\n\r\n.export-option input:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.export-info {\r\n    background: #f8f9fa;\r\n    padding: 15px 20px;\r\n    border-radius: 10px;\r\n    border-left: 4px solid #667eea;\r\n}\r\n\r\n.export-info p {\r\n    margin: 5px 0;\r\n    color: #495057;\r\n}\r\n\r\n.export-actions {\r\n    display: flex;\r\n    gap: 15px;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.btn {\r\n    padding: 12px 25px;\r\n    border: none;\r\n    border-radius: 10px;\r\n    font-size: 15px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n}\r\n\r\n.btn-primary {\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.btn-primary:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\r\n}\r\n\r\n.btn-secondary {\r\n    background: #6c757d;\r\n    color: white;\r\n    box-shadow: 0 3px 10px rgba(108, 117, 125, 0.3);\r\n}\r\n\r\n.btn-secondary:hover {\r\n    background: #5a6268;\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 5px 15px rgba(108, 117, 125, 0.4);\r\n}\r\n\r\n.atk-preview {\r\n    background: #2d2d2d;\r\n    border-radius: 10px;\r\n    padding: 20px;\r\n    margin-top: 20px;\r\n}\r\n\r\n.atk-preview h4 {\r\n    color: #00e676;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.atk-preview pre {\r\n    color: #e0e0e0;\r\n    font-family: 'Consolas', 'Monaco', monospace;\r\n    font-size: 13px;\r\n    line-height: 1.5;\r\n    white-space: pre-wrap;\r\n    word-break: break-all;\r\n    max-height: 300px;\r\n    overflow-y: auto;\r\n    margin: 0;\r\n}\r\n\r\n.atk-preview pre::-webkit-scrollbar {\r\n    width: 8px;\r\n}\r\n\r\n.atk-preview pre::-webkit-scrollbar-track {\r\n    background: #1a1a1a;\r\n    border-radius: 4px;\r\n}\r\n\r\n.atk-preview pre::-webkit-scrollbar-thumb {\r\n    background: #555;\r\n    border-radius: 4px;\r\n}\r\n\r\n.atk-preview pre::-webkit-scrollbar-thumb:hover {\r\n    background: #666;\r\n}\r\n\r\n/* ===== ATK Hub åŒæ­¥æ ·å¼ ===== */\r\n.sync-btn {\r\n    background: linear-gradient(135deg, #ff6b6b 0%, #ee5a5a 100%);\r\n    margin-left: 10px;\r\n    box-shadow: 0 3px 10px rgba(255, 107, 107, 0.3);\r\n}\r\n\r\n.sync-btn:hover {\r\n    box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);\r\n}\r\n\r\n.modal-lg {\r\n    max-width: 1000px;\r\n}\r\n\r\n.sync-instructions {\r\n    background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);\r\n    border: 2px solid #667eea30;\r\n    border-radius: 12px;\r\n    padding: 20px;\r\n    margin-bottom: 25px;\r\n}\r\n\r\n.sync-instructions h3 {\r\n    color: #667eea;\r\n    margin-bottom: 15px;\r\n    font-size: 1.2em;\r\n}\r\n\r\n.sync-instructions ol {\r\n    padding-left: 20px;\r\n    color: #495057;\r\n    line-height: 1.8;\r\n}\r\n\r\n.sync-instructions li {\r\n    margin: 8px 0;\r\n}\r\n\r\n.link-atk {\r\n    color: #ff6b6b;\r\n    font-weight: 600;\r\n    text-decoration: none;\r\n}\r\n\r\n.link-atk:hover {\r\n    text-decoration: underline;\r\n}\r\n\r\n.sync-options {\r\n    margin-bottom: 25px;\r\n}\r\n\r\n.sync-option {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.sync-option label {\r\n    display: block;\r\n    font-weight: 600;\r\n    color: #495057;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.sync-option select {\r\n    width: 100%;\r\n    padding: 12px 15px;\r\n    border: 2px solid #dee2e6;\r\n    border-radius: 8px;\r\n    font-size: 16px;\r\n    background: white;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n}\r\n\r\n.sync-option select:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.sync-option-row {\r\n    display: flex;\r\n    gap: 20px;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.sync-option-row .sync-option {\r\n    flex: 1;\r\n    min-width: 200px;\r\n}\r\n\r\n/* å®é€‰æ‹©åŒºåŸŸ */\r\n.macro-selection {\r\n    background: #f8f9fa;\r\n    border-radius: 12px;\r\n    padding: 20px;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.selection-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 15px;\r\n    flex-wrap: wrap;\r\n    gap: 10px;\r\n}\r\n\r\n.selection-header h4 {\r\n    margin: 0;\r\n    color: #495057;\r\n    font-size: 1.1em;\r\n}\r\n\r\n.selection-actions {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.btn-sm {\r\n    padding: 6px 14px;\r\n    background: #6c757d;\r\n    color: white;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-size: 13px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-sm:hover {\r\n    background: #5a6268;\r\n}\r\n\r\n.selected-count {\r\n    font-size: 14px;\r\n    color: #495057;\r\n    padding: 6px 12px;\r\n    background: white;\r\n    border-radius: 6px;\r\n    box-shadow: 0 1px 3px rgba(0,0,0,0.1);\r\n}\r\n\r\n.selected-count strong {\r\n    color: #ff6b6b;\r\n    font-size: 16px;\r\n}\r\n\r\n.macro-filter {\r\n    display: flex;\r\n    gap: 10px;\r\n    margin-bottom: 15px;\r\n}\r\n\r\n.macro-filter input {\r\n    flex: 1;\r\n    padding: 10px 15px;\r\n    border: 2px solid #dee2e6;\r\n    border-radius: 8px;\r\n    font-size: 14px;\r\n}\r\n\r\n.macro-filter input:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n}\r\n\r\n.macro-filter select {\r\n    padding: 10px 15px;\r\n    border: 2px solid #dee2e6;\r\n    border-radius: 8px;\r\n    font-size: 14px;\r\n    background: white;\r\n    min-width: 150px;\r\n}\r\n\r\n.macro-checkbox-list {\r\n    max-height: 300px;\r\n    overflow-y: auto;\r\n    background: white;\r\n    border-radius: 8px;\r\n    border: 1px solid #dee2e6;\r\n}\r\n\r\n.macro-checkbox-list::-webkit-scrollbar {\r\n    width: 8px;\r\n}\r\n\r\n.macro-checkbox-list::-webkit-scrollbar-track {\r\n    background: #f1f1f1;\r\n    border-radius: 4px;\r\n}\r\n\r\n.macro-checkbox-list::-webkit-scrollbar-thumb {\r\n    background: #c1c1c1;\r\n    border-radius: 4px;\r\n}\r\n\r\n.macro-checkbox-list::-webkit-scrollbar-thumb:hover {\r\n    background: #a1a1a1;\r\n}\r\n\r\n.macro-checkbox-item {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 12px 15px;\r\n    border-bottom: 1px solid #f0f0f0;\r\n    cursor: pointer;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.macro-checkbox-item:hover {\r\n    background: #f8f9fa;\r\n}\r\n\r\n.macro-checkbox-item:last-child {\r\n    border-bottom: none;\r\n}\r\n\r\n.macro-checkbox-item input[type=\"checkbox\"] {\r\n    width: 18px;\r\n    height: 18px;\r\n    margin-right: 12px;\r\n    cursor: pointer;\r\n    accent-color: #667eea;\r\n}\r\n\r\n.macro-checkbox-info {\r\n    flex: 1;\r\n    min-width: 0;\r\n}\r\n\r\n.macro-checkbox-name {\r\n    display: block;\r\n    font-weight: 600;\r\n    color: #212529;\r\n    font-size: 14px;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.macro-checkbox-meta {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    font-size: 12px;\r\n    color: #6c757d;\r\n    margin-top: 3px;\r\n}\r\n\r\n.macro-cat-tag {\r\n    background: #667eea;\r\n    color: white;\r\n    padding: 2px 8px;\r\n    border-radius: 10px;\r\n    font-size: 11px;\r\n}\r\n\r\n.macro-checkbox-list .loading,\r\n.macro-checkbox-list .no-results {\r\n    padding: 30px;\r\n    text-align: center;\r\n    color: #6c757d;\r\n}\r\n\r\n.sync-actions {\r\n    display: flex;\r\n    gap: 15px;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.sync-preview {\r\n    background: #1e1e1e;\r\n    border-radius: 10px;\r\n    padding: 20px;\r\n    margin-top: 20px;\r\n    border: 1px solid #333;\r\n}\r\n\r\n.sync-preview h4 {\r\n    color: #00ff88;\r\n    margin-bottom: 15px;\r\n    font-size: 1em;\r\n}\r\n\r\n.sync-preview pre {\r\n    color: #d4d4d4;\r\n    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\r\n    font-size: 12px;\r\n    line-height: 1.4;\r\n    white-space: pre-wrap;\r\n    word-break: break-all;\r\n    max-height: 250px;\r\n    overflow-y: auto;\r\n    margin: 0;\r\n    background: #2d2d2d;\r\n    padding: 15px;\r\n    border-radius: 8px;\r\n}\r\n\r\n.sync-preview pre::-webkit-scrollbar {\r\n    width: 8px;\r\n}\r\n\r\n.sync-preview pre::-webkit-scrollbar-track {\r\n    background: #1a1a1a;\r\n    border-radius: 4px;\r\n}\r\n\r\n.sync-preview pre::-webkit-scrollbar-thumb {\r\n    background: #555;\r\n    border-radius: 4px;\r\n}\r\n\r\n.sync-status {\r\n    margin-top: 15px;\r\n}\r\n\r\n.status-success {\r\n    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);\r\n    color: #155724;\r\n    padding: 15px 20px;\r\n    border-radius: 10px;\r\n    border-left: 4px solid #28a745;\r\n    line-height: 1.6;\r\n}\r\n\r\n.status-success strong {\r\n    display: block;\r\n    margin-bottom: 5px;\r\n}\r\n\r\n.status-success small {\r\n    opacity: 0.8;\r\n}\r\n\r\n.status-error {\r\n    background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);\r\n    color: #721c24;\r\n    padding: 15px 20px;\r\n    border-radius: 10px;\r\n    border-left: 4px solid #dc3545;\r\n}\r\n\r\n.status-loading {\r\n    background: linear-gradient(135deg, #fff3cd 0%, #ffeeba 100%);\r\n    color: #856404;\r\n    padding: 15px 20px;\r\n    border-radius: 10px;\r\n    border-left: 4px solid #ffc107;\r\n    animation: pulse 1.5s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n    0%, 100% { opacity: 1; }\r\n    50% { opacity: 0.7; }\r\n}\r\n\r\n/* å“åº”å¼ */\r\n@media (max-width: 768px) {\r\n    .controls {\r\n        flex-direction: column;\r\n        align-items: stretch;\r\n    }\r\n\r\n    .search-box {\r\n        min-width: 100%;\r\n    }\r\n\r\n    .stats {\r\n        margin-left: 0;\r\n        flex-direction: column;\r\n        gap: 10px;\r\n    }\r\n\r\n    .macro-list {\r\n        grid-template-columns: 1fr;\r\n    }\r\n    \r\n    .pagination {\r\n        flex-wrap: wrap;\r\n        gap: 5px;\r\n    }\r\n    \r\n    .page-btn {\r\n        padding: 8px 12px;\r\n        font-size: 14px;\r\n        min-width: 40px;\r\n    }\r\n    \r\n    .modal-content {\r\n        width: 95%;\r\n        margin: 5% auto;\r\n    }\r\n    \r\n    .modal-info-grid {\r\n        grid-template-columns: 1fr;\r\n    }\r\n    \r\n    .modal-header h2 {\r\n        font-size: 1.3em;\r\n    }\r\n    \r\n    .export-box {\r\n        width: 100%;\r\n        flex-direction: column;\r\n        gap: 10px;\r\n    }\r\n    \r\n    .export-btn {\r\n        width: 100%;\r\n    }\r\n    \r\n    .sync-btn {\r\n        margin-left: 0;\r\n    }\r\n    \r\n    .export-actions,\r\n    .sync-actions {\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .btn {\r\n        width: 100%;\r\n    }\r\n    \r\n    .sync-instructions ol {\r\n        padding-left: 15px;\r\n        font-size: 0.95em;\r\n    }\r\n}\r\n";
